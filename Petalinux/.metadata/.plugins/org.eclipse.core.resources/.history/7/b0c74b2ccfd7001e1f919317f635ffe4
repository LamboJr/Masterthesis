#include "../Includes/DataTypes.h"
#include <stdio.h>
#include "../Includes/MonitorTrade.h"

#include "../Includes/Link.h"

#include "../Includes/linkcommand.h"
#include "../Includes/decodeTrainderCard.h"
#include "../Includes/DecodePokemonData.h"
#include "../Testing/TestDataTrade.h"


void StartFunctionTestPrint(const char *FuncName){
	printf("Start test of function --%s--\n",FuncName);
	return;
}
void EndFunctionTestPrint(const char *FuncName){
	printf("Test of function --%s-- successful\n",FuncName);
	return;
}

void RunAllMonitorTests(){
	StartFunctionTestPrint(__func__);


	EndFunctionTestPrint(__func__);
	return;
}

void MonitrHanlderTest(){
	StartFunctionTestPrint(__func__);
	FILE *fp;
	extern FILE *PokemonFp;
	//--------------------------------------------------------------------------
	printf("Write Monitor Output to file log.txt\n");
	 // Open file in write mode
	 fp = fopen("/home/petalinux/log.txt", "w");
	 // Check if file opened successfully
	if (fp == NULL) {
		printf("Error opening file.\n");
		return 1;
	}
	// Write output to file
	//fprintf(fp, "This is the output that will be written to the file.\n");
	printf("Write Extracted Data into datalog.txt\n");
	PokemonFp = fopen("/home/petalinux/datalog.txt","w");
	if(PokemonFp == NULL){
		printf("Error opening file datalog.txt.\n");
		return 1;
	}
	u32 Inputdata;
	for(int i = 0; i< sizeof(TestDataTrade)/sizeof(u32); i++){
		Inputdata = TestDataTrade[i];
		MonitorHandler(Inputdata, dump,fp);
	}



	EndFunctionTestPrint(__func__);
	return;
}
